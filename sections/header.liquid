<header class="bg-white shadow-sm relative">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Mobile menu button -->
      <button 
        id="mobile-menu-button" 
        class="md:hidden flex items-center px-3 py-2 text-gray-600"
        aria-label="Toggle menu"
      >
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path 
            class="menu-open"
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M4 6h16M4 12h16M4 18h16"
          />
          <path 
            class="menu-close hidden"
            stroke-linecap="round" 
            stroke-linejoin="round" 
            stroke-width="2" 
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>

      <!-- Logo -->
      <a href="/" class="text-2xl font-bold text-primary">
        {% if section.settings.logo != blank %}
          <img src="{{ section.settings.logo | img_url: '160x' }}" alt="{{ shop.name }}" class="max-h-11">
        {% else %}
          {{ shop.name }}
        {% endif %}
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex space-x-8">
        {% for link in linklists.main-menu.links %}
          <a href="{{ link.url }}" class="text-gray-600 hover:text-primary">{{ link.title }}</a>
        {% endfor %}
      </nav>

      <!-- Cart -->
      <a href="/cart" class="text-gray-600 hover:text-primary">
        Cart ({{ cart.item_count }})
      </a>
    </div>
  </div>
</header>

<!-- Mobile menu -->
<div id="mobile-menu-overlay" class="mobile-menu-overlay"></div>
<div id="mobile-menu" class="mobile-menu">
  <div class="px-4 py-6">
    <nav>
      {% for link in linklists.main-menu.links %}
        <a 
          href="{{ link.url }}" 
          class="block py-2 text-base font-medium text-gray-900 hover:text-primary"
        >
          {{ link.title }}
        </a>
      {% endfor %}
    </nav>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const button = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');
    const overlay = document.getElementById('mobile-menu-overlay');
    const openIcon = button.querySelector('.menu-open');
    const closeIcon = button.querySelector('.menu-close');
    
    function toggleMenu() {
      const isOpen = menu.classList.contains('is-active');
      
      menu.classList.toggle('is-active');
      overlay.classList.toggle('is-active');
      document.body.classList.toggle('menu-open');
      
      // Toggle icons
      openIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
      
      // Update aria attributes
      button.setAttribute('aria-expanded', !isOpen);
    }
    
    button.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', toggleMenu);
    
    // Close menu when clicking a link
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', toggleMenu);
    });
    
    // Handle escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && menu.classList.contains('is-active')) {
        toggleMenu();
      }
    });
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    }
  ]
}
{% endschema %}