<article class="container mx-auto px-4 py-8">
  <header class="max-w-4xl mx-auto mb-8">
    <h1 class="text-4xl font-bold mb-4">{{ article.title }}</h1>
    
    <div class="text-gray-600 mb-4">
      {{ article.published_at | date: '%B %d, %Y' }}
      {% if article.author %}
        by {{ article.author }}
      {% endif %}
    </div>

    {% if article.image %}
      <div class="aspect-w-16 aspect-h-9 mb-8">
        <img src="{{ article.image | img_url: '1400x' }}"
             alt="{{ article.title }}"
             class="w-full h-full object-cover rounded-lg shadow-lg">
      </div>
    {% endif %}
  </header>

  <div class="prose prose-lg max-w-4xl mx-auto article-content">
    <!-- Article content with enhanced styling for injected HTML -->
    <style>
      .article-content {
        color: #374151;
        line-height: 1.8;
      }
      .article-content h2 {
        font-size: 1.875rem;
        font-weight: 700;
        margin-top: 2.5rem;
        margin-bottom: 1.25rem;
        color: #111827;
      }
      .article-content h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #1F2937;
      }
      .article-content p {
        margin-bottom: 1.5rem;
      }
      .article-content ul, .article-content ol {
        margin-top: 1rem;
        margin-bottom: 1rem;
        padding-left: 1.5rem;
      }
      .article-content ul {
        list-style-type: disc;
      }
      .article-content ol {
        list-style-type: decimal;
      }
      .article-content li {
        margin-bottom: 0.5rem;
      }
      .article-content a {
        color: #2563EB;
        text-decoration: underline;
      }
      .article-content a:hover {
        color: #1D4ED8;
      }
      .article-content blockquote {
        border-left: 4px solid #E5E7EB;
        padding-left: 1rem;
        margin-left: 0;
        margin-right: 0;
        font-style: italic;
        color: #4B5563;
      }
      .article-content img {
        border-radius: 0.5rem;
        margin: 2rem auto;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }
      .article-content code {
        background-color: #F3F4F6;
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.875em;
      }
      .article-content pre {
        background-color: #1F2937;
        color: #F3F4F6;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1.5rem 0;
      }
      .article-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 2rem 0;
      }
      .article-content th, .article-content td {
        border: 1px solid #E5E7EB;
        padding: 0.75rem;
        text-align: left;
      }
      .article-content th {
        background-color: #F9FAFB;
        font-weight: 600;
      }
      .article-content figure {
        margin: 2rem 0;
      }
      .article-content figcaption {
        text-align: center;
        color: #6B7280;
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }
    </style>
    {{ article.content }}
  </div>

  {% if blog.comments_enabled? %}
    <div class="max-w-4xl mx-auto mt-12">
      <h2 class="text-2xl font-bold mb-6">Comments</h2>

      {% paginate article.comments by 5 %}
        {% for comment in article.comments %}
          <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
            <div class="flex items-center justify-between mb-4">
              <span class="font-medium">{{ comment.author }}</span>
              <span class="text-gray-500 text-sm">{{ comment.created_at | date: '%B %d, %Y' }}</span>
            </div>
            <div class="text-gray-700">
              {{ comment.content }}
            </div>
          </div>
        {% endfor %}

        {% if paginate.pages > 1 %}
          <div class="flex justify-center space-x-4 mt-8">
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Previous</a>
            {% endif %}

            {% for part in paginate.parts %}
              {% if part.is_link %}
                <a href="{{ part.url }}" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">{{ part.title }}</a>
              {% else %}
                <span class="px-4 py-2 bg-primary-600 text-white rounded">{{ part.title }}</span>
              {% endif %}
            {% endfor %}

            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Next</a>
            {% endif %}
          </div>
        {% endif %}
      {% endpaginate %}

      <div class="mt-12">
        <h3 class="text-xl font-bold mb-4">Leave a comment</h3>
        {% form 'new_comment', article %}
          {% if form.errors %}
            <div class="bg-red-50 border border-red-200 text-red-600 p-4 rounded mb-4">
              {{ form.errors | default_errors }}
            </div>
          {% endif %}

          {% if form.posted_successfully? %}
            <div class="bg-green-50 border border-green-200 text-green-600 p-4 rounded mb-4">
              Comment was posted successfully!
            </div>
          {% endif %}

          <div class="grid grid-cols-1 gap-4">
            <div>
              <label for="CommentAuthor" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
              <input type="text"
                     name="comment[author]"
                     id="CommentAuthor"
                     class="w-full px-4 py-2 border rounded-md"
                     required>
            </div>

            <div>
              <label for="CommentEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
              <input type="email"
                     name="comment[email]"
                     id="CommentEmail"
                     class="w-full px-4 py-2 border rounded-md"
                     required>
            </div>

            <div>
              <label for="CommentBody" class="block text-sm font-medium text-gray-700 mb-1">Comment</label>
              <textarea name="comment[body]"
                        id="CommentBody"
                        class="w-full px-4 py-2 border rounded-md"
                        rows="4"
                        required></textarea>
            </div>

            <div>
              <button type="submit"
                      class="bg-primary-600 text-white px-6 py-2 rounded hover:bg-primary-700">
                Post comment
              </button>
            </div>
          </div>
        {% endform %}
      </div>
    </div>
  {% endif %}
</article>

{% schema %}
{
  "name": "Article",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_author",
      "label": "Show author",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show date",
      "default": true
    }
  ]
}
{% endschema %}