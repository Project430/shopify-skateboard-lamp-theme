{% assign current_variant = product.selected_or_first_available_variant %}

<script>
window.variants = {{ product.variants | json }};

// Include currency formatting data
window.moneyFormat = {{ shop.money_format | json }};
</script>

[Previous content up to handleVariantChange function]

function handleVariantChange(event) {
  const select = event.target;
  const form = select.closest('form');
  const selects = form.querySelectorAll('select');
  const selectedOptions = Array.from(selects).map(select => select.value);
  
  const matchingVariant = window.variants.find(variant => 
    variant.options.every((option, index) => option === selectedOptions[index])
  );
  
  if (matchingVariant) {
    // Update variant ID
    document.getElementById('variant-id').value = matchingVariant.id;
    
    // Update price
    const priceElement = document.querySelector('.mt-3 .text-3xl.tracking-tight');
    if (priceElement) {
      const formattedPrice = window.moneyFormat.replace('{{amount}}', (matchingVariant.price/100).toFixed(2));
      priceElement.textContent = formattedPrice;
    }
    
    // Rest of the function unchanged
    [...]
  }
}

[Rest of the file unchanged]