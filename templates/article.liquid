<article class="article">
  <div class="page-width">
    <header class="section-header text-center">
      <h1 class="section-header__title h2">{{ article.title }}</h1>
      <p class="article__author">
        {{ article.published_at | date: "%B %d, %Y" }}
      </p>
    </header>

    {%- if article.image -%}
      <div class="article__featured-image-wrapper">
        {{ article.image | img_url: '1400x' | img_tag: article.title, 'article__featured-image' }}
      </div>
    {%- endif -%}

    <div class="article__content rte">
      {{ article.content }}
    </div>

    {%- if blog.comments_enabled? -%}
      <div id="comments" class="article__comments">
        {%- if article.comments_count > 0 -%}
          <h2 class="h3">{{ 'blogs.comments.comments_with_count' | t: count: article.comments_count }}</h2>

          {%- paginate article.comments by 5 -%}
            {%- for comment in article.comments -%}
              <div class="comment">
                <div class="comment__content">
                  {{ comment.content }}
                </div>
                <div class="comment__meta">
                  {{ comment.author }} on {{ comment.created_at | date: format: 'month_day_year' }}
                </div>
              </div>
            {%- endfor -%}

            {%- if paginate.pages > 1 -%}
              <nav class="pagination">
                {{ paginate | default_pagination }}
              </nav>
            {%- endif -%}
          {%- endpaginate -%}
        {%- endif -%}

        <div class="comment-form">
          {%- form 'new_comment', article -%}
            <h2 class="h3">{{ 'blogs.comments.title' | t }}</h2>

            {%- if form.errors -%}
              <div class="form-message form-message--error">
                {{ form.errors | default_errors }}
              </div>
            {%- endif -%}

            <div class="grid">
              <div class="grid__item medium-up--one-half">
                <label for="CommentAuthor">{{ 'blogs.comments.name' | t }}</label>
                <input type="text" name="comment[author]" id="CommentAuthor" class="input-full{% if form.errors contains 'author' %} input--error{% endif %}" value="{{ form.author }}" autocapitalize="words">
              </div>

              <div class="grid__item medium-up--one-half">
                <label for="CommentEmail">{{ 'blogs.comments.email' | t }}</label>
                <input type="email" name="comment[email]" id="CommentEmail" class="input-full{% if form.errors contains 'email' %} input--error{% endif %}" value="{{ form.email }}" autocorrect="off" autocapitalize="off">
              </div>

              <div class="grid__item">
                <label for="CommentBody">{{ 'blogs.comments.message' | t }}</label>
                <textarea name="comment[body]" id="CommentBody" class="input-full{% if form.errors contains 'body' %} input--error{% endif %}">{{ form.body }}</textarea>
              </div>
            </div>

            <input type="submit" class="btn" value="{{ 'blogs.comments.post' | t }}">
          {%- endform -%}
        </div>
      </div>
    {%- endif -%}
  </div>
</article>

{% schema %}
{
  "name": "Article pages",
  "settings": []
}
{% endschema %}